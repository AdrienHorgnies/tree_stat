dist: xenial
language: python
python:
- '3.5'
- '3.6'
- '3.7'
cache: pip
before_install:
- pip install --upgrade pip # travis use an ancient version...
- pip install pip-tools # pip-tools to generate requirements.txt
- pip-compile # generate requirements.txt
before_script:
  - pip install -e .[dev] # install dev dependencies to test
script:
- python -m pytest # unit tests
- python setup.py build install # build and install so that I can test
- cd tests/assets
- python -m tree_stat sample-tree -o travis-stat.md # test script against sample data
- diff travis-stat.md sample-tree-stat.md # compare sample result with expected result
- cd ../..
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: ahorgnies
  server: https://test.pypi.org/legacy/
  on:
    tags: true
  password:
    secure: FbjqyY54Z6D5mf8J4MwJOR3YsJypM7796QnJiIHNootne6UOS/wf9Fq5jc6VCuGS9hQpEAwcUXgw2Hhp63xFtW44c0Lr1/Zd11btiTJoo7mraXabeQDxPGv0VZrtBaUBWbS7QpkaadvQQfZPSyA8tesLhDJ49Fk/qbQK4QuvMVry9bDq3VKOjGPpxEONqDktgNBv6KDhTigLa2E0T6o+Vbq/6s8YFCTWLE+Vz+lQF+3SGM7lNEMFD318mroSVdjvT4jsM+PcsK3OTTSxji31kmXKw81NPrGrenHII163ToEQiMNik7pxioOgYulaXMTScVf2e55vI4ETnC+/FBNXSAId/Tlvl86fYa0owzZENUIbkk3ml/6VTrV9DueeqtMqvNrDBPCrWH2nf+iYaCEfUBpefWORiWQF1xBOOlZEjxl0JQpPEwzymWfipG2gXKjG5AHm6iKnU1jF3awMKmfR7xhzlrBTdG+l+cArjjjHDe5NnUhlKMw+gUjIMGgYgmEcsV9PW80aNjwa7s19j/PGatJjgU875MnwnUcRGcdk6MWlVxiJsvCO625mH4FulA/3EWZ37uwStVk7Hwa71e8lSEyaprtCxsOP7g50QEBzUWobuoep212na3QiNGrvH4D+Cjd1WFnP+EXxvM0tF+TMJONeTdXTGmYXGV3tY4giRwU=
